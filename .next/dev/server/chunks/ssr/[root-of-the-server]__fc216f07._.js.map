{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/src/hooks/useResponsiveSize.ts"],"sourcesContent":["import { useMediaQuery } from 'react-responsive';\r\n\r\n// use desktop size as base size\r\nexport const useResponsiveSize = (baseSize: number) => {\r\n  const isPhone = useMediaQuery({ maxWidth: 480 });\r\n  const isTablet = useMediaQuery({ minWidth: 481, maxWidth: 1024 });\r\n  if (isPhone) return baseSize * 1.25;\r\n  if (isTablet) return baseSize * 1.25;\r\n  return baseSize;\r\n};\r\n\r\nexport const useDefaultIconSize = () => {\r\n  return useResponsiveSize(20);\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAGO,MAAM,oBAAoB,CAAC;IAChC,MAAM,UAAU,IAAA,mQAAa,EAAC;QAAE,UAAU;IAAI;IAC9C,MAAM,WAAW,IAAA,mQAAa,EAAC;QAAE,UAAU;QAAK,UAAU;IAAK;IAC/D,IAAI,SAAS,OAAO,WAAW;IAC/B,IAAI,UAAU,OAAO,WAAW;IAChC,OAAO;AACT;AAEO,MAAM,qBAAqB;IAChC,OAAO,kBAAkB;AAC3B","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/src/store/trafficLightStore.ts"],"sourcesContent":["// 导入Tauri API相关功能\r\nimport { invoke } from '@tauri-apps/api/core';\r\n// 导入应用服务类型定义\r\nimport { AppService } from '@/types/system';\r\n// 导入Zustand的create函数用于创建状态管理store\r\nimport { create } from 'zustand';\r\n\r\n// 窗口控制按钮的水平内边距\r\nconst WINDOW_CONTROL_PAD_X = 10.0;\r\n// 窗口控制按钮的垂直内边距\r\nconst WINDOW_CONTROL_PAD_Y = 22.0;\r\n\r\n// 交通灯（窗口控制按钮）状态接口定义\r\ninterface TrafficLightState {\r\n  // 应用服务实例，可选\r\n  appService?: AppService;\r\n  // 交通灯是否可见\r\n  isTrafficLightVisible: boolean;\r\n  // 是否应该显示交通灯\r\n  shouldShowTrafficLight: boolean;\r\n  // 交通灯是否在全屏模式下\r\n  trafficLightInFullscreen: boolean;\r\n  // 初始化交通灯状态管理\r\n  initializeTrafficLightStore: (appService: AppService) => void;\r\n  // 设置交通灯可见性\r\n  setTrafficLightVisibility: (visible: boolean, position?: { x: number; y: number }) => void;\r\n  // 初始化交通灯相关事件监听器\r\n  initializeTrafficLightListeners: () => Promise<void>;\r\n  // 清理交通灯相关事件监听器\r\n  cleanupTrafficLightListeners: () => void;\r\n  // 退出全屏模式的事件监听器清理函数\r\n  unlistenExitFullScreen?: () => void;\r\n  // 进入全屏模式的事件监听器清理函数\r\n  unlistenEnterFullScreen?: () => void;\r\n}\r\n\r\n// 创建交通灯状态管理store\r\nexport const useTrafficLightStore = create<TrafficLightState>((set, get) => {\r\n  return {\r\n    // 初始状态\r\n    appService: undefined,\r\n    isTrafficLightVisible: false,\r\n    shouldShowTrafficLight: false,\r\n    trafficLightInFullscreen: false,\r\n\r\n    // 初始化交通灯状态管理\r\n    initializeTrafficLightStore: (appService: AppService) => {\r\n        set({\r\n            appService: appService,\r\n            isTrafficLightVisible: appService.hasTrafficLight,\r\n            shouldShowTrafficLight: appService.hasTrafficLight,\r\n        })\r\n    },\r\n\r\n    // 设置交通灯可见性函数\r\n    setTrafficLightVisibility: async (visible: boolean, position?: { x: number; y: number }) => {\r\n      // 动态导入窗口API以避免不必要的初始化开销\r\n      const { getCurrentWindow } = await import('@tauri-apps/api/window');\r\n      const currentWindow = getCurrentWindow();\r\n      // 检查当前窗口是否处于全屏模式\r\n      const isFullscreen = await currentWindow.isFullscreen();\r\n      \r\n      // 更新状态\r\n      set({\r\n        isTrafficLightVisible: !isFullscreen && visible,\r\n        shouldShowTrafficLight: visible,\r\n        trafficLightInFullscreen: isFullscreen,\r\n      });\r\n      \r\n      // 调用Tauri后端函数设置交通灯可见性和位置\r\n      invoke('set_traffic_lights', {\r\n        visible: visible,\r\n        x: position?.x ?? WINDOW_CONTROL_PAD_X,\r\n        y: position?.y ?? WINDOW_CONTROL_PAD_Y,\r\n      });\r\n    },\r\n\r\n    // 初始化交通灯相关事件监听器\r\n    initializeTrafficLightListeners: async () => {\r\n      // 动态导入窗口API\r\n      const { getCurrentWindow } = await import('@tauri-apps/api/window');\r\n      const currentWindow = getCurrentWindow();\r\n\r\n      // 监听进入全屏模式事件\r\n      const unlistenEnterFullScreen = await currentWindow.listen('will-enter-fullscreen', () => {\r\n        // 进入全屏时隐藏交通灯\r\n        set({ isTrafficLightVisible: false, trafficLightInFullscreen: true });\r\n      });\r\n\r\n      // 监听退出全屏模式事件\r\n      const unlistenExitFullScreen = await currentWindow.listen('will-exit-fullscreen', () => {\r\n        const { shouldShowTrafficLight } = get();\r\n        // 退出全屏时根据shouldShowTrafficLight状态决定是否显示交通灯\r\n        set({ isTrafficLightVisible: shouldShowTrafficLight, trafficLightInFullscreen: false });\r\n      });\r\n\r\n      // 保存事件监听器清理函数，以便后续可以清理它们\r\n      set({ unlistenEnterFullScreen, unlistenExitFullScreen });\r\n    },\r\n\r\n    // 清理交通灯相关事件监听器\r\n    cleanupTrafficLightListeners: () => {\r\n      const { unlistenEnterFullScreen, unlistenExitFullScreen } = get();\r\n      // 清理进入全屏模式的事件监听器\r\n      if (unlistenEnterFullScreen) unlistenEnterFullScreen();\r\n      // 清理退出全屏模式的事件监听器\r\n      if (unlistenExitFullScreen) unlistenExitFullScreen();\r\n      // 重置监听器清理函数状态\r\n      set({ unlistenEnterFullScreen: undefined, unlistenExitFullScreen: undefined });\r\n    },\r\n  }\r\n});"],"names":[],"mappings":"AAAA,kBAAkB;;;;;AAClB;AAGA,kCAAkC;AAClC;;;AAEA,eAAe;AACf,MAAM,uBAAuB;AAC7B,eAAe;AACf,MAAM,uBAAuB;AA2BtB,MAAM,uBAAuB,IAAA,+PAAM,EAAoB,CAAC,KAAK;IAClE,OAAO;QACL,OAAO;QACP,YAAY;QACZ,uBAAuB;QACvB,wBAAwB;QACxB,0BAA0B;QAE1B,aAAa;QACb,6BAA6B,CAAC;YAC1B,IAAI;gBACA,YAAY;gBACZ,uBAAuB,WAAW,eAAe;gBACjD,wBAAwB,WAAW,eAAe;YACtD;QACJ;QAEA,aAAa;QACb,2BAA2B,OAAO,SAAkB;YAClD,wBAAwB;YACxB,MAAM,EAAE,gBAAgB,EAAE,GAAG;YAC7B,MAAM,gBAAgB;YACtB,iBAAiB;YACjB,MAAM,eAAe,MAAM,cAAc,YAAY;YAErD,OAAO;YACP,IAAI;gBACF,uBAAuB,CAAC,gBAAgB;gBACxC,wBAAwB;gBACxB,0BAA0B;YAC5B;YAEA,yBAAyB;YACzB,IAAA,2NAAM,EAAC,sBAAsB;gBAC3B,SAAS;gBACT,GAAG,UAAU,KAAK;gBAClB,GAAG,UAAU,KAAK;YACpB;QACF;QAEA,gBAAgB;QAChB,iCAAiC;YAC/B,YAAY;YACZ,MAAM,EAAE,gBAAgB,EAAE,GAAG;YAC7B,MAAM,gBAAgB;YAEtB,aAAa;YACb,MAAM,0BAA0B,MAAM,cAAc,MAAM,CAAC,yBAAyB;gBAClF,aAAa;gBACb,IAAI;oBAAE,uBAAuB;oBAAO,0BAA0B;gBAAK;YACrE;YAEA,aAAa;YACb,MAAM,yBAAyB,MAAM,cAAc,MAAM,CAAC,wBAAwB;gBAChF,MAAM,EAAE,sBAAsB,EAAE,GAAG;gBACnC,2CAA2C;gBAC3C,IAAI;oBAAE,uBAAuB;oBAAwB,0BAA0B;gBAAM;YACvF;YAEA,yBAAyB;YACzB,IAAI;gBAAE;gBAAyB;YAAuB;QACxD;QAEA,eAAe;QACf,8BAA8B;YAC5B,MAAM,EAAE,uBAAuB,EAAE,sBAAsB,EAAE,GAAG;YAC5D,iBAAiB;YACjB,IAAI,yBAAyB;YAC7B,iBAAiB;YACjB,IAAI,wBAAwB;YAC5B,cAAc;YACd,IAAI;gBAAE,yBAAyB;gBAAW,wBAAwB;YAAU;QAC9E;IACF;AACF","debugId":null}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/src/app/library/components/LibraryHeader.tsx"],"sourcesContent":["import clsx from 'clsx';\r\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport { PiPlus } from 'react-icons/pi';\r\nimport { PiSelectionAllDuotone } from 'react-icons/pi';\r\nimport { PiDotsThreeCircle } from 'react-icons/pi';\r\nimport { MdOutlineMenu, MdArrowBackIosNew } from 'react-icons/md';\r\nimport { IoMdCloseCircle } from 'react-icons/io';\r\nimport { useResponsiveSize } from '@/hooks/useResponsiveSize';\r\n\r\nimport { useTrafficLightStore } from '@/store/trafficLightStore';\r\nimport { useEnv } from '@/context/EnvContext';\r\n\r\ninterface LibraryHeaderProps {\r\n  isSelectMode: boolean;\r\n  isSelectAll: boolean;\r\n  onImportBooks: () => void;\r\n  onToggleSelectMode: () => void;\r\n  onSelectAll: () => void;\r\n  onDeselectAll: () => void;\r\n}\r\n\r\nconst LibraryHeader: React.FC<LibraryHeaderProps> = ({ isSelectMode, isSelectAll, onImportBooks, onToggleSelectMode, onSelectAll, onDeselectAll }) => {\r\n  const searchParams = useSearchParams();\r\n  const { appService } = useEnv();\r\n  const { isTrafficLightVisible, initializeTrafficLightStore, initializeTrafficLightListeners, setTrafficLightVisibility, cleanupTrafficLightListeners } = useTrafficLightStore();\r\n  const windowButtonVisible = appService?.hasWindowBar && !isTrafficLightVisible;\r\n  const [searchQuery, setSearchQuery] = useState(searchParams?.get('q') ?? '');\r\n  const isInGroupView = !!searchParams?.get('group');\r\n\r\n  const headerRef = useRef<HTMLDivElement>(null);\r\n  const iconSize18 = useResponsiveSize(18);\r\n  const iconSize20 = useResponsiveSize(20);\r\n\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        'titlebar z-10 flex h-[52px] w-full items-center py-2 pr-4 sm:h-[48px]', // 基础样式\r\n        windowButtonVisible ? 'sm:pr-4' : 'sm:pr-6', // 根据窗口按钮可见性调整右边距\r\n        isTrafficLightVisible ? 'pl-16' : 'pl-0 sm:pl-2', // 根据交通灯可见性调整左边距\r\n      )}\r\n    >\r\n      <div className='flex w-full items-center justify-between space-x-6 sm:space-x-12'>\r\n        <div className='exclude-title-bar-mousedown relative flex w-full items-center pl-4'>\r\n          {isInGroupView && (\r\n            <button className='mr-4 ml-[-6px] flex h-7 min-h-7 w-7 items-center p-0'>\r\n              <div className='lg:tooltip lg:tooltip-bottom' data-tip={'返回'}>\r\n                <MdArrowBackIosNew size={iconSize20} />\r\n              </div>\r\n            </button>\r\n          )}\r\n          <div className='relative flex h-9 w-full items-center sm:h-7'>\r\n            <span className='absolute left-3 text-gray-500'>\r\n              <FaSearch className='h-4 w-4' />\r\n            </span>\r\n            <input type='text' spellCheck='false' className={clsx('input rounded-badge bg-base-300/45 h-9 w-full pr-10 pl-10 sm:h-7', 'font-sans text-sm font-light', 'border-none focus:ring-0 focus:outline-none')} />\r\n          </div>\r\n          <div className='absolute right-4 flex items-center space-x-2 text-gray-500 sm:space-x-4'>\r\n            {searchQuery && (\r\n              <button type='button' className='pe-1 text-gray-400 hover:text-gray-600' aria-label={'清除搜索'}>\r\n                <IoMdCloseCircle className='h-4 w-4' />\r\n              </button>\r\n            )}\r\n            <span className='bg-base-content/50 mx-2 h-4 w-[0.5px]'></span>\r\n            {appService?.isMobile ? null : (\r\n              <button onClick={onToggleSelectMode} aria-label={'选择书籍'} title={'选择书籍'} className='h-6'>\r\n                <PiSelectionAllDuotone role='button' className={`h-6 w-6 ${isSelectMode ? 'fill-gray-400' : 'fill-gray-500'}`} />\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LibraryHeader;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;AAWA,MAAM,gBAA8C,CAAC,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAE,kBAAkB,EAAE,WAAW,EAAE,aAAa,EAAE;IAC/I,MAAM,eAAe,IAAA,oRAAe;IACpC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,uIAAM;IAC7B,MAAM,EAAE,qBAAqB,EAAE,2BAA2B,EAAE,+BAA+B,EAAE,yBAAyB,EAAE,4BAA4B,EAAE,GAAG,IAAA,yJAAoB;IAC7K,MAAM,sBAAsB,YAAY,gBAAgB,CAAC;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC,cAAc,IAAI,QAAQ;IACzE,MAAM,gBAAgB,CAAC,CAAC,cAAc,IAAI;IAE1C,MAAM,YAAY,IAAA,8UAAM,EAAiB;IACzC,MAAM,aAAa,IAAA,sJAAiB,EAAC;IACrC,MAAM,aAAa,IAAA,sJAAiB,EAAC;IAErC,qBACE,6WAAC;QACC,WAAW,IAAA,iMAAI,EACb,yEACA,sBAAsB,YAAY,WAClC,wBAAwB,UAAU;kBAGpC,cAAA,6WAAC;YAAI,WAAU;sBACb,cAAA,6WAAC;gBAAI,WAAU;;oBACZ,+BACC,6WAAC;wBAAO,WAAU;kCAChB,cAAA,6WAAC;4BAAI,WAAU;4BAA+B,YAAU;sCACtD,cAAA,6WAAC,oPAAiB;gCAAC,MAAM;;;;;;;;;;;;;;;;kCAI/B,6WAAC;wBAAI,WAAU;;0CACb,6WAAC;gCAAK,WAAU;0CACd,cAAA,6WAAC,2OAAQ;oCAAC,WAAU;;;;;;;;;;;0CAEtB,6WAAC;gCAAM,MAAK;gCAAO,YAAW;gCAAQ,WAAW,IAAA,iMAAI,EAAC,oEAAoE,gCAAgC;;;;;;;;;;;;kCAE5J,6WAAC;wBAAI,WAAU;;4BACZ,6BACC,6WAAC;gCAAO,MAAK;gCAAS,WAAU;gCAAyC,cAAY;0CACnF,cAAA,6WAAC,kPAAe;oCAAC,WAAU;;;;;;;;;;;0CAG/B,6WAAC;gCAAK,WAAU;;;;;;4BACf,YAAY,WAAW,qBACtB,6WAAC;gCAAO,SAAS;gCAAoB,cAAY;gCAAQ,OAAO;gCAAQ,WAAU;0CAChF,cAAA,6WAAC,wPAAqB;oCAAC,MAAK;oCAAS,WAAW,CAAC,QAAQ,EAAE,eAAe,kBAAkB,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7H;uCAEe","debugId":null}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/src/app/library/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport clsx from 'clsx';\r\nimport * as React from 'react';\r\nimport { useState, useRef, useEffect, Suspense, useCallback } from 'react';\r\nimport { ReadonlyURLSearchParams, useRouter, useSearchParams } from 'next/navigation';\r\nimport LibraryHeader from './components/LibraryHeader';\r\n\r\nconst LibraryPageWithSearchParams = () => {\r\n  const searchParams = useSearchParams();\r\n  return <LibraryPageContent searchParams={searchParams} />;\r\n};\r\n\r\nconst LibraryPageContent = ({ searchParams }: { searchParams: ReadonlyURLSearchParams | null }) => {\r\n  const [isSelectMode, setIsSelectMode] = useState(false);\r\n  const [isSelectAll, setIsSelectAll] = useState(false);\r\n  const [isSelectNone, setIsSelectNone] = useState(false);\r\n  return (\r\n    <div aria-label='Your Library' className={clsx('library-page bg-base-200 text-base-content flex h-[100vh] flex-col overflow-hidden select-none')}>\r\n      <div className='top-0 z-40 w-full' role='banner'>\r\n        <LibraryHeader isSelectMode={isSelectMode} isSelectAll={isSelectAll} onImportBooks={() => {}} onToggleSelectMode={() => {}} onSelectAll={() => {}} onDeselectAll={() => {}} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst LibraryPage = () => {\r\n  return (\r\n    <Suspense fallback={<div className='h-[100vh]' />}>\r\n      <LibraryPageWithSearchParams />\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default LibraryPage;\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AANA;;;;;;AAQA,MAAM,8BAA8B;IAClC,MAAM,eAAe,IAAA,oRAAe;IACpC,qBAAO,6WAAC;QAAmB,cAAc;;;;;;AAC3C;AAEA,MAAM,qBAAqB,CAAC,EAAE,YAAY,EAAoD;IAC5F,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAC;IACjD,qBACE,6WAAC;QAAI,cAAW;QAAe,WAAW,IAAA,iMAAI,EAAC;kBAC7C,cAAA,6WAAC;YAAI,WAAU;YAAoB,MAAK;sBACtC,cAAA,6WAAC,gKAAa;gBAAC,cAAc;gBAAc,aAAa;gBAAa,eAAe,KAAO;gBAAG,oBAAoB,KAAO;gBAAG,aAAa,KAAO;gBAAG,eAAe,KAAO;;;;;;;;;;;;;;;;AAIjL;AAEA,MAAM,cAAc;IAClB,qBACE,6WAAC,gVAAQ;QAAC,wBAAU,6WAAC;YAAI,WAAU;;;;;;kBACjC,cAAA,6WAAC;;;;;;;;;;AAGP;uCAEe","debugId":null}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/src/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport LibraryPage from './library/page';\r\n\r\nexport default function HomePage() {\r\n  return <LibraryPage />;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,6WAAC,yIAAW;;;;;AACrB","debugId":null}}]
}