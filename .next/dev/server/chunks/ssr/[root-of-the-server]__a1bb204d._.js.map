{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/src/services/environment.ts"],"sourcesContent":["import { AppService } from '@/types/system';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __READEST_CLI_ACCESS?: boolean;\r\n  }\r\n}\r\n\r\nexport const isTauriAppPlatform = () => process.env['NEXT_PUBLIC_APP_PLATFORM'] === 'tauri';\r\nexport const isWebAppPlatform = () => process.env['NEXT_PUBLIC_APP_PLATFORM'] === 'web';\r\n\r\nexport interface EnvConfigType {\r\n  getAppService: () => Promise<AppService>;\r\n}\r\n\r\nlet nativeAppService: AppService | null = null;\r\nconst getNativeAppService = async () => {\r\n  if (!nativeAppService) {\r\n    const { NativeAppService } = await import('@/services/nativeAppService');\r\n    nativeAppService = new NativeAppService();\r\n    await nativeAppService.init();\r\n  }\r\n  return nativeAppService;\r\n};\r\n\r\nconst environmentConfig: EnvConfigType = {\r\n  getAppService: async () => {\r\n    return getNativeAppService();\r\n    // if (isTauriAppPlatform()) {\r\n    //   return getNativeAppService();\r\n    // } else {\r\n    //   return getWebAppService();\r\n    // }\r\n  },\r\n};\r\n\r\nexport default environmentConfig;\r\n"],"names":[],"mappings":";;;;;;;;AAQO,MAAM,qBAAqB,IAAM,QAAQ,GAAG,CAAC,2BAA2B,KAAK;AAC7E,MAAM,mBAAmB,IAAM,QAAQ,GAAG,CAAC,2BAA2B,KAAK;AAMlF,IAAI,mBAAsC;AAC1C,MAAM,sBAAsB;IAC1B,IAAI,CAAC,kBAAkB;QACrB,MAAM,EAAE,gBAAgB,EAAE,GAAG;QAC7B,mBAAmB,IAAI;QACvB,MAAM,iBAAiB,IAAI;IAC7B;IACA,OAAO;AACT;AAEA,MAAM,oBAAmC;IACvC,eAAe;QACb,OAAO;IACP,8BAA8B;IAC9B,kCAAkC;IAClC,WAAW;IACX,+BAA+B;IAC/B,IAAI;IACN;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/src/context/EnvContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useState, ReactNode } from 'react';\r\n\r\nimport { EnvConfigType } from '../services/environment';\r\nimport { AppService } from '@/types/system';\r\nimport env from '../services/environment';\r\n\r\n// 环境上下文类型定义\r\n// 包含环境配置和应用服务两个核心属性\r\ninterface EnvContextType {\r\n  envConfig: EnvConfigType; // 环境配置对象\r\n  appService: AppService | null; // 应用服务实例，提供平台相关的功能实现\r\n}\r\n\r\n// 创建环境上下文\r\n// 初始值设为undefined，表示上下文尚未提供\r\nconst EnvContext = createContext<EnvContextType | undefined>(undefined);\r\n\r\n// 环境提供者组件\r\n// 将环境配置和应用服务注入到React组件树中\r\nexport const EnvProvider = ({ children }: { children: ReactNode }) => {\r\n  // 初始化环境配置状态\r\n  const [envConfig] = useState<EnvConfigType>(env);\r\n  // 初始化应用服务状态，默认为null\r\n  const [appService, setAppService] = useState<AppService | null>(null);\r\n\r\n  // 组件挂载时获取应用服务实例\r\n  // 并添加全局错误事件监听器\r\n  React.useEffect(() => {\r\n    // 异步获取应用服务实例并设置到状态中\r\n    envConfig.getAppService().then((service) => setAppService(service));\r\n\r\n    // 添加全局错误事件监听器\r\n    // 处理 ResizeObserver 循环限制超出的错误\r\n    window.addEventListener('error', (e) => {\r\n      if (e.message === 'ResizeObserver loop limit exceeded') {\r\n        // 阻止错误继续传播\r\n        e.stopImmediatePropagation();\r\n        // 阻止默认行为\r\n        e.preventDefault();\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n  }, [envConfig]);\r\n\r\n  // 提供环境上下文值给子组件\r\n  return <EnvContext.Provider value={{ envConfig, appService }}>{children}</EnvContext.Provider>;\r\n};\r\n\r\n// 环境上下文钩子\r\n// 用于在组件中访问环境配置和应用服务\r\n// 如果在EnvProvider外使用会抛出错误\r\nexport const useEnv = (): EnvContextType => {\r\n  const context = useContext(EnvContext);\r\n  if (!context) throw new Error('useEnv must be used within EnvProvider');\r\n  return context;\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAIA;AANA;;;;AAeA,UAAU;AACV,2BAA2B;AAC3B,MAAM,2BAAa,IAAA,qVAAa,EAA6B;AAItD,MAAM,cAAc,CAAC,EAAE,QAAQ,EAA2B;IAC/D,YAAY;IACZ,MAAM,CAAC,UAAU,GAAG,IAAA,gVAAQ,EAAgB,yIAAG;IAC/C,oBAAoB;IACpB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,gVAAQ,EAAoB;IAEhE,gBAAgB;IAChB,eAAe;IACf,+UAAK,CAAC,SAAS,CAAC;QACd,oBAAoB;QACpB,UAAU,aAAa,GAAG,IAAI,CAAC,CAAC,UAAY,cAAc;QAE1D,cAAc;QACd,8BAA8B;QAC9B,OAAO,gBAAgB,CAAC,SAAS,CAAC;YAChC,IAAI,EAAE,OAAO,KAAK,sCAAsC;gBACtD,WAAW;gBACX,EAAE,wBAAwB;gBAC1B,SAAS;gBACT,EAAE,cAAc;gBAChB,OAAO;YACT;YACA,OAAO;QACT;IACF,GAAG;QAAC;KAAU;IAEd,eAAe;IACf,qBAAO,6WAAC,WAAW,QAAQ;QAAC,OAAO;YAAE;YAAW;QAAW;kBAAI;;;;;;AACjE;AAKO,MAAM,SAAS;IACpB,MAAM,UAAU,IAAA,kVAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/node_modules/.pnpm/next%4016.0.1_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/node_modules/.pnpm/next%4016.0.1_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,uMACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///D:/tauri/rest/node_modules/.pnpm/next%4016.0.1_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,uMACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}